<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>tvc</title>
<script src="scripts/z80.js"></script>
<script src="scripts/tvc.js"></script>
<script type="text/javascript">
	var tvc,canvas,ctx;
	function readData(url, callback) {
		var oReq = new XMLHttpRequest();
		oReq.open("GET", url, true);
		oReq.responseType = "arraybuffer";
		oReq.onload = function (oEvent) {
			var arrayBuffer = oReq.response;
			if (arrayBuffer) { callback(arrayBuffer); }
		}
		oReq.send(null);
	}
	function startEmu() {
		var im, imx, imy;
		canvas = document.getElementById('tvc');
		ctx = canvas.getContext('2d');
		tvc = new TVCModule.TVC(ctx);
		readData("TVC_SYS.ROM", function (data) {
			tvc.addRom("SYS", new Uint8Array(data));
			readData("TVC_EXT.ROM", function (data) {
				tvc.addRom("EXT", new Uint8Array(data));
				tvc.run();
			  });
		  });
	};
</script>
    <style type="text/css">
      canvas { border: 1px solid black; }
    </style>
</head>
<body onload="startEmu();">
<canvas id="tvc" width="800" height="400"></canvas>

</body>
</html>
